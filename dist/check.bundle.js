(()=>{var e={8887:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Bitmap:()=>h,ECMode:()=>u,Encoding:()=>f,_tests:()=>B,default:()=>I,encodeQR:()=>A,utf8ToBytes:()=>C,utils:()=>M});function r(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw new Error(`Invalid version=${e}. Expected number [1..40]`)}function o(e,t){return e.toString(2).padStart(t,"0")}function i(e,t){const n=e%t;return n>=0?n:t+n}function a(e,t){return new Array(e).fill(t)}function l(...e){let t=0;for(const n of e)t=Math.max(t,n.length);const n=[];for(let r=0;r<t;r++)for(const t of e)r>=t.length||n.push(t[r]);return new Uint8Array(n)}function s(e,t,n){if(n<0||n+t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function d(){let e,t=1/0;return{add(n,r){n>=t||(e=r,t=n)},get:()=>e,score:()=>t}}function c(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})},encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(function(e){if(!Number.isSafeInteger(e))throw new Error(`integer expected: ${e}`)}(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})}}}class h{static size(e,t){if("number"==typeof e&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: invalid height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: invalid width=${e.width} (${typeof e.width})`);return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){const t=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(String.fromCharCode(10)),n=t.length,r=new Array(n);let o;for(const e of t){const t=e.split("").map(e=>{if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw new Error(`Bitmap.fromString: unknown symbol=${e}`)});if(o&&t.length!==o)throw new Error(`Bitmap.fromString different row sizes: width=${o} cur=${t.length}`);o=t.length,r.push(t)}return o||(o=0),new h({height:n,width:o},r)}data;height;width;constructor(e,t){const{height:n,width:r}=h.size(e);this.data=t||Array.from({length:n},()=>a(r,void 0)),this.height=n,this.width=r}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:t,y:n}=this.xy(e);return{height:this.height-n,width:this.width-t}}xy(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: invalid x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: invalid y=${e.y}`);return e.x=i(e.x,this.width),e.y=i(e.y,this.height),e}rect(e,t,n){const{x:r,y:o}=this.xy(e),{height:i,width:a}=h.size(t,this.size({x:r,y:o}));for(let e=0;e<i;e++)for(let t=0;t<a;t++)this.data[o+e][r+t]="function"==typeof n?n({x:t,y:e},this.data[o+e][r+t]):n;return this}rectRead(e,t,n){return this.rect(e,t,(e,t)=>(n(e,t),t))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(e=2,t){const n=this.height+2*e,r=this.width+2*e,o=a(e,t),i=Array.from({length:e},()=>a(r,t));return new h({height:n,width:r},[...i,...this.data.map(e=>[...o,...e,...o]),...i])}embed(e,t){return this.rect(e,t.size(),({x:e,y:n})=>t.data[n][e])}rectSlice(e,t=this.size()){const n=new h(h.size(t,this.size(this.xy(e))));return this.rect(e,t,({x:e,y:t},r)=>n.data[t][e]=r),n}inverse(){const{height:e,width:t}=this;return new h({height:t,width:e}).rect({x:0,y:0},1/0,({x:e,y:t})=>this.data[e][t])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`invalid scale factor: ${e}`);const{height:t,width:n}=this;return new h({height:e*t,width:e*n}).rect({x:0,y:0},1/0,({x:t,y:n})=>this.data[Math.floor(n/e)][Math.floor(t/e)])}clone(){return new h(this.size()).rect({x:0,y:0},this.size(),({x:e,y:t})=>this.data[t][e])}assertDrawn(){this.rectRead(0,1/0,(e,t)=>{if("boolean"!=typeof t)throw new Error("Invalid color type="+typeof t)})}toString(){return this.data.map(e=>e.map(e=>void 0===e?"?":e?"X":" ").join("")).join(String.fromCharCode(10))}toASCII(){const{height:e,width:t,data:n}=this;let r="";for(let o=0;o<e;o+=2){for(let i=0;i<t;i++){const t=n[o][i],a=o+1>=e||n[o+1][i];t||a?!t&&a?r+="▀":t&&!a?r+="▄":t&&a&&(r+=" "):r+="█"}r+=String.fromCharCode(10)}return r}toTerm(){const e=String.fromCharCode(27),t=e+"[0m",n=e+"[1;47m  "+t,r=e+"[40m  "+t;return this.data.map(e=>e.map(e=>e?r:n).join("")).join(String.fromCharCode(10))}toSVG(e=!0){let t,n=`<svg viewBox="0 0 ${this.width} ${this.height}" xmlns="http://www.w3.org/2000/svg">`,r="";return this.rectRead(0,1/0,(o,i)=>{if(!i)return;const{x:a,y:l}=o;if(!e)return void(n+=`<rect x="${a}" y="${l}" width="1" height="1" />`);let s=`M${a} ${l}`;if(t){const e=`m${a-t.x} ${l-t.y}`;e.length<=s.length&&(s=e)}r+=`${s}h1v1${a<10?`H${a}`:"h-1"}Z`,t=o}),e&&(n+=`<path d="${r}"/>`),n+="</svg>",n}toGIF(){const e=e=>[255&e,e>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,(e,t)=>n.push(+(!0===t)));const r=126,o=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...a(381,0),44,0,0,0,0,...t,0,7],i=Math.floor(n.length/r);for(let e=0;e<i;e++)o.push(127,128,...n.slice(r*e,r*(e+1)).map(e=>+e));return o.push(n.length%r+1,128,...n.slice(i*r).map(e=>+e)),o.push(1,129,0,59),new Uint8Array(o)}toImage(e=!1){const{height:t,width:n}=this.size(),r=new Uint8Array(t*n*(e?3:4));let o=0;for(let i=0;i<t;i++)for(let t=0;t<n;t++){const n=this.data[i][t]?0:255;r[o++]=n,r[o++]=n,r[o++]=n,e||(r[o++]=255)}return{height:t,width:n,data:r}}}const u=["low","medium","quartile","high"],f=["numeric","alphanumeric","byte","kanji","eci"],g=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],m={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},p={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},y={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(1===e)return[];const t=y.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28);let o=Math.floor(n/r);o%2?o+=1:n%r*2>=r&&(o+=2);const i=[6];for(let e=1;e<r;e++)i.push(t-(r-e)*o);return i.push(t),i},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){const n=y.ECCode[e]<<3|t;let r=n;for(let e=0;e<10;e++)r=r<<1^1335*(r>>9);return(n<<10|r)^y.formatMask},versionBits(e){let t=e;for(let e=0;e<12;e++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:c("0123456789"),alphanumerc:c("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[t][y.sizeType(e)]),modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){const n=g[e-1],r=m[t][e-1],o=p[t][e-1],i=Math.floor(n/o)-r,a=o-n%o;return{words:r,numBlocks:o,shortBlocks:a,blockLen:i,capacity:8*(n-r*o),total:(r+i)*o+o-a}}},w=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,(e,t)=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],b={tables:(()=>{const e=a(256,0),t=a(256,0);for(let n=0,r=1;n<256;n++)e[n]=r,t[r]=n,r<<=1,256&r&&(r^=285);return{exp:e,log:t}})(),exp:e=>b.tables.exp[e],log(e){if(0===e)throw new Error(`GF.log: invalid arg=${e}`);return b.tables.log[e]%255},mul:(e,t)=>0===e||0===t?0:b.tables.exp[(b.tables.log[e]+b.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>b.tables.exp[b.tables.log[e]*t%255],inv(e){if(0===e)throw new Error(`GF.inverse: invalid arg=${e}`);return b.tables.exp[255-b.tables.log[e]]},polynomial(e){if(0==e.length)throw new Error("GF.polymomial: invalid length");if(0!==e[0])return e;let t=0;for(;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial(e,t){if(e<0)throw new Error(`GF.monomial: invalid degree=${e}`);if(0==t)return[0];let n=a(e+1,0);return n[0]=t,b.polynomial(n)},degree:e=>e.length-1,coefficient:(e,t)=>e[b.degree(e)-t],mulPoly(e,t){if(0===e[0]||0===t[0])return[0];const n=a(e.length+t.length-1,0);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]=b.add(n[r+o],b.mul(e[r],t[o]));return b.polynomial(n)},mulPolyScalar(e,t){if(0==t)return[0];if(1==t)return e;const n=a(e.length,0);for(let r=0;r<e.length;r++)n[r]=b.mul(e[r],t);return b.polynomial(n)},mulPolyMonomial(e,t,n){if(t<0)throw new Error("GF.mulPolyMonomial: invalid degree");if(0==n)return[0];const r=a(e.length+t,0);for(let t=0;t<e.length;t++)r[t]=b.mul(e[t],n);return b.polynomial(r)},addPoly(e,t){if(0===e[0])return t;if(0===t[0])return e;let n=e,r=t;n.length>r.length&&([n,r]=[r,n]);let o=a(r.length,0),i=r.length-n.length,l=r.slice(0,i);for(let e=0;e<l.length;e++)o[e]=l[e];for(let e=i;e<r.length;e++)o[e]=b.add(n[e-i],r[e]);return b.polynomial(o)},remainderPoly(e,t){const n=Array.from(e);for(let r=0;r<e.length-t.length+1;r++){const e=n[r];if(0!==e)for(let o=1;o<t.length;o++)0!==t[o]&&(n[r+o]=b.add(n[r+o],b.mul(t[o],e)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly(e){let t=[1];for(let n=0;n<e;n++)t=b.mulPoly(t,[1,b.pow(2,n)]);return t},evalPoly(e,t){if(0==t)return b.coefficient(e,0);let n=e[0];for(let r=1;r<e.length;r++)n=b.add(b.mul(t,n),e[r]);return n},euclidian(e,t,n){b.degree(e)<b.degree(t)&&([e,t]=[t,e]);let r=e,o=t,i=[0],a=[1];for(;2*b.degree(o)>=n;){let e=r,t=i;if(r=o,i=a,0===r[0])throw new Error("rLast[0] === 0");o=e;let n=[0];const l=b.inv(r[0]);for(;b.degree(o)>=b.degree(r)&&0!==o[0];){const e=b.degree(o)-b.degree(r),t=b.mul(o[0],l);n=b.addPoly(n,b.monomial(e,t)),o=b.addPoly(o,b.mulPolyMonomial(r,e,t))}if(n=b.mulPoly(n,i),a=b.addPoly(n,t),b.degree(o)>=b.degree(r))throw new Error(`Division failed r: ${o}, rLast: ${r}`)}const l=b.coefficient(a,0);if(0==l)throw new Error("sigmaTilde(0) was zero");const s=b.inv(l);return[b.mulPolyScalar(a,s),b.mulPolyScalar(o,s)]}};function x(e,t){const{words:n,shortBlocks:r,numBlocks:o,blockLen:i,total:s}=y.capacity(e,t),d=(c=n,{encode(e){const t=b.divisorPoly(c),n=Array.from(e);return n.push(...t.slice(0,-1).fill(0)),Uint8Array.from(b.remainderPoly(n,t))},decode(e){const t=e.slice(),n=b.polynomial(Array.from(e));let r=a(c,0),o=!1;for(let e=0;e<c;e++){const t=b.evalPoly(n,b.exp(e));r[r.length-1-e]=t,0!==t&&(o=!0)}if(!o)return t;r=b.polynomial(r);const i=b.monomial(c,1),[l,s]=b.euclidian(i,r,c),d=a(b.degree(l),0);let h=0;for(let e=1;e<256&&h<d.length;e++)0===b.evalPoly(l,e)&&(d[h++]=b.inv(e));if(h!==d.length)throw new Error("RS.decode: invalid errors number");for(let e=0;e<d.length;e++){const n=t.length-1-b.log(d[e]);if(n<0)throw new Error("RS.decode: invalid error location");const r=b.inv(d[e]);let o=1;for(let t=0;t<d.length;t++)e!==t&&(o=b.mul(o,b.add(1,b.mul(d[t],r))));t[n]=b.add(t[n],b.mul(b.evalPoly(s,r),b.inv(o)))}return t}});var c;return{encode(e){const t=[],n=[];for(let a=0;a<o;a++){const o=i+(a<r?0:1);t.push(e.subarray(0,o)),n.push(d.encode(e.subarray(0,o))),e=e.subarray(o)}const a=l(...t),s=l(...n),c=new Uint8Array(a.length+s.length);return c.set(a),c.set(s,a.length),c},decode(e){if(e.length!==s)throw new Error(`interleave.decode: len(data)=${e.length}, total=${s}`);const t=[];for(let e=0;e<o;e++){const o=e<r;t.push(new Uint8Array(n+i+(o?0:1)))}let a=0;for(let n=0;n<i;n++)for(let r=0;r<o;r++)t[r][n]=e[a++];for(let n=r;n<o;n++)t[n][i]=e[a++];for(let l=i;l<i+n;l++)for(let n=0;n<o;n++){const o=n<r;t[n][l+(o?0:1)]=e[a++]}const l=[];for(const e of t)l.push(...Array.from(d.decode(e)).slice(0,-n));return Uint8Array.from(l)}}}function v(e,t,n,r=!1){const o=y.size.encode(e);let i=new h(o+2);const a=new h(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);i=i.embed(0,a).embed({x:-a.width,y:0},a).embed({x:0,y:-a.height},a),i=i.rectSlice(1,o);const l=new h(1).rect(0,1,!0).border(1,!1).border(1,!0),s=y.alignmentPatterns(e);for(const e of s)for(const t of s)void 0===i.data[e][t]&&i.embed({x:t-2,y:e-2},l);i=i.hLine({x:0,y:6},1/0,({x:e},t)=>void 0===t?e%2==0:t).vLine({x:6,y:0},1/0,({y:e},t)=>void 0===t?e%2==0:t);{const e=y.formatBits(t,n),a=t=>!r&&1==(e>>t&1);for(let e=0;e<6;e++)i.data[e][8]=a(e);for(let e=6;e<8;e++)i.data[e+1][8]=a(e);for(let e=8;e<15;e++)i.data[o-15+e][8]=a(e);for(let e=0;e<8;e++)i.data[8][o-e-1]=a(e);for(let e=8;e<9;e++)i.data[8][15-e-1+1]=a(e);for(let e=9;e<15;e++)i.data[8][15-e-1]=a(e);i.data[o-8][8]=!r}if(e>=7){const t=y.versionBits(e);for(let e=0;e<18;e+=1){const n=!r&&1==(t>>e&1),a=Math.floor(e/3),l=e%3+o-8-3;i.data[a][l]=n,i.data[l][a]=n}}return i}function E(e,t,n){const r=e.height,o=w[t];let i=-1,a=r-1;for(let t=r-1;t>0;t-=2){for(6==t&&(t=5);;a+=i){for(let r=0;r<2;r+=1){const i=t-r;void 0===e.data[a][i]&&n(i,a,o(i,a))}if(a+i<0||a+i>=r)break}i=-i}}function S(e){let t="numeric";for(let n of e)if(!y.alphabet.numeric.has(n)&&(t="alphanumeric",!y.alphabet.alphanumerc.has(n)))return"byte";return t}function C(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function k(e,t,n,r){let i="",a=n.length;if("numeric"===r){const e=y.alphabet.numeric.decode(n.split("")),t=e.length;for(let n=0;n<t-2;n+=3)i+=o(100*e[n]+10*e[n+1]+e[n+2],10);t%3==1?i+=o(e[t-1],4):t%3==2&&(i+=o(10*e[t-2]+e[t-1],7))}else if("alphanumeric"===r){const e=y.alphabet.alphanumerc.decode(n.split("")),t=e.length;for(let n=0;n<t-1;n+=2)i+=o(45*e[n]+e[n+1],11);t%2==1&&(i+=o(e[t-1],6))}else{if("byte"!==r)throw new Error("encode: unsupported type");{const e=C(n);a=e.length,i=Array.from(e).map(e=>o(e,8)).join("")}}const{capacity:l}=y.capacity(e,t),s=o(a,y.lengthBits(e,r));let d=y.modeBits[r]+s+i;if(d.length>l)throw new Error("Capacity overflow");d+="0".repeat(Math.min(4,Math.max(0,l-d.length))),d.length%8&&(d+="0".repeat(8-d.length%8));for(let e=0;d.length!==l;e++)d+="1110110000010001"[e%16];const c=Uint8Array.from(d.match(/(.{8})/g).map(e=>Number(`0b${e}`)));return x(e,t).encode(c)}function $(e,t,n,r,o=!1){const i=v(e,t,r,o);let a=0;const l=8*n.length;if(E(i,r,(e,t,r)=>{let o=!1;a<l&&(o=!!(n[a>>>3]>>(7-a&7)&1),a++),i.data[t][e]=o!==r}),a!==l)throw new Error("QR: bytes left after draw");return i}function T(e){const t=e.inverse(),n=e=>{let t=0;for(let n,r=0,o=1;r<e.length;r++)n===e[r]&&(o++,r!==e.length-1)||(o>=5&&(t+=o-5+3),n=e[r],o=1);return t};let r=0;e.data.forEach(e=>r+=n(e)),t.data.forEach(e=>r+=n(e));let o=0,i=e.data;const a=e.width-1,l=e.height-1;for(let e=0;e<a;e++)for(let t=0;t<l;t++){const n=e+1,r=t+1;i[e][t]===i[n][t]&&i[n][t]===i[e][r]&&i[n][t]===i[n][r]&&(o+=3)}const d=e=>{const t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[...t,...n],o=[...n,...t];let i=0;for(let t=0;t<e.length;t++)s(e,r,t)&&(i+=40),s(e,o,t)&&(i+=40);return i};let c=0;for(const t of e.data)c+=d(t);for(const e of t.data)c+=d(e);let h=0;e.rectRead(0,1/0,(e,t)=>h+=t?1:0);const u=h/(e.height*e.width)*100,f=10*Math.floor(Math.abs(u-50)/5);return r+o+c+f}function A(e,t="raw",n={}){const o=void 0!==n.ecc?n.ecc:"medium";!function(e){if(!u.includes(e))throw new Error(`Invalid error correction mode=${e}. Expected: ${u}`)}(o);const i=void 0!==n.encoding?n.encoding:S(e);!function(e){if(!f.includes(e))throw new Error(`Encoding: invalid mode=${e}. Expected: ${f}`);if("kanji"===e||"eci"===e)throw new Error(`Encoding: ${e} is not supported (yet?).`)}(i),void 0!==n.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!w[e])throw new Error(`Invalid mask=${e}. Expected number [0..7]`)}(n.mask);let a,l=n.version,s=new Error("Unknown error");if(void 0!==l)r(l),a=k(l,o,e,i);else for(let t=1;t<=40;t++)try{a=k(t,o,e,i),l=t;break}catch(e){s=e}if(!l||!a)throw s;let c=function(e,t,n,r){if(void 0===r){const o=d();for(let r=0;r<w.length;r++)o.add(T($(e,t,n,r,!0)),r);r=o.get()}if(void 0===r)throw new Error("Cannot find mask");return $(e,t,n,r)}(l,o,a,n.mask);c.assertDrawn();const h=void 0===n.border?2:n.border;if(!Number.isSafeInteger(h))throw new Error("invalid border type="+typeof h);if(c=c.border(h,!1),void 0!==n.scale&&(c=c.scale(n.scale)),"raw"===t)return c.data;if("ascii"===t)return c.toASCII();if("svg"===t)return c.toSVG(n.optimize);if("gif"===t)return c.toGIF();if("term"===t)return c.toTerm();throw new Error(`Unknown output: ${t}`)}const I=A,M={best:d,bin:o,drawTemplate:v,fillArr:a,info:y,interleave:x,validateVersion:r,zigzag:E},B={Bitmap:h,info:y,detectType:S,encode:k,drawQR:$,penalty:T,PATTERNS:w}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const r=n(8887),o="function"==typeof r?r:r.default;async function i(e){const t=`https://blockchain.info/balance?active=${e.join("|")}&cors=true`,n=await fetch(t);if(!n.ok)throw new Error(`API 请求失败: ${n.status}`);return n.json()}window.checkAddresses=async function(){const e=document.getElementById("status"),t=document.getElementById("error");e&&(e.textContent=""),t&&(t.textContent="");try{const o=JSON.parse(localStorage.getItem("paymentAddresses")||"[]"),a=JSON.parse(localStorage.getItem("changeAddresses")||"[]");if(0===o.length&&0===a.length)throw new Error("localStorage 中没有地址，请先生成。");const l=[];async function n(e){let t=0;for(let n=0;n<e.length;n+=100){const r=e.slice(n,n+100);if(t>=5)break;const o=r.map(e=>e.address),a=await i(o);for(const e of r){const n=a[e.address],r=n&&"number"==typeof n.n_tx?n.n_tx:0,o=n&&(r>0||n.final_balance>0),i=n?n.final_balance:0;l.push({...e,used:o,balance:i,n_tx:r}),o?t=0:t++}}}await n(o),await n(a),localStorage.setItem("addressStatuses",JSON.stringify(l)),r=`已查询 ${l.length} 个地址，结果已保存到 localStorage(addressStatuses)`,e?e.textContent=r:console.log("STATUS:",r)}catch(s){console.error("检查地址失败",s),(e=>{t?t.textContent=e:console.error("ERROR:",e)})("检查地址失败: "+s.message)}var r},window.computeTotalBalance=function(){const e=document.getElementById("status"),t=document.getElementById("error");e&&(e.textContent=""),t&&(t.textContent="");try{const t=JSON.parse(localStorage.getItem("addressStatuses")||"[]");if(0===t.length)throw new Error("请先执行地址检查，再计算余额");const r=t.reduce((e,t)=>e+(t.balance||0),0),o=r/1e8;localStorage.setItem("totalBalance",JSON.stringify({satoshi:r,btc:o})),"function"==typeof window.refreshSummary&&window.refreshSummary(),n=`总余额: ${o} BTC (${r} satoshi)`,e?e.textContent=n:console.log("STATUS:",n)}catch(e){console.error("计算余额失败",e),(e=>{t?t.textContent=e:console.error("ERROR:",e)})("计算余额失败: "+e.message)}var n},window.getReceiveAddress=function(){const e=document.getElementById("status"),t=document.getElementById("error"),n=t=>{e?e.textContent=t:console.log("STATUS:",t)};e&&(e.textContent=""),t&&(t.textContent="");try{const t=JSON.parse(localStorage.getItem("addressStatuses")||"[]"),r=JSON.parse(localStorage.getItem("paymentAddresses")||"[]");if(0===r.length)throw new Error("请先生成地址列表");if(0===t.length)throw new Error("请先检查地址状态");let i=null;for(const e of r){const n=t.find(t=>t.address===e.address);if(n&&!n.used){i=e;break}}return i?n(`接收地址: ${i.address} (路径: ${i.path})`):(i=r[0],n(`接收地址: ${i.address} (路径: ${i.path}) - 警告：所有已检查地址都已使用`)),function(e){const t=document.getElementById("qrOverlay");t&&t.remove();const n=document.createElement("div");if(n.id="qrOverlay",n.style.cssText="\n    position: fixed;\n    inset: 0;\n    background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(20, 20, 20, 0.8) 100%);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 12000;\n    animation: fadeIn 0.3s ease-out;\n  ",!document.getElementById("qrModalStyles")){const e=document.createElement("style");e.id="qrModalStyles",e.textContent="\n      @keyframes fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n      @keyframes fadeOut {\n        from { opacity: 1; }\n        to { opacity: 0; }\n      }\n      @keyframes slideUp {\n        from { \n          opacity: 0;\n          transform: translateY(30px) scale(0.95);\n        }\n        to { \n          opacity: 1;\n          transform: translateY(0) scale(1);\n        }\n      }\n      @keyframes pulse {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.02); }\n      }\n    ",document.head.appendChild(e)}n.addEventListener("click",e=>{e.target===n&&(n.style.animation="fadeOut 0.2s ease-out",setTimeout(()=>n.remove(),200))});const r=document.createElement("div");r.style.cssText="\n    background: #000;\n    border: 1px solid #333;\n    border-radius: 20px;\n    padding: 32px 28px;\n    width: calc(100vw - 48px);\n    max-width: 380px;\n    text-align: center;\n    box-shadow: \n      0 20px 40px rgba(0, 0, 0, 0.5),\n      0 0 20px rgba(247, 147, 26, 0.1),\n      inset 0 1px 0 rgba(255, 255, 255, 0.05);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n    overflow: hidden;\n    animation: slideUp 0.4s ease-out;\n  ";const i=document.createElement("button");i.innerHTML="✕",i.style.cssText="\n    position: absolute;\n    top: 16px;\n    right: 16px;\n    width: 32px;\n    height: 32px;\n    border: none;\n    background: rgba(255, 255, 255, 0.1);\n    color: #ccc;\n    border-radius: 50%;\n    font-size: 16px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.3s ease;\n    z-index: 1;\n  ",i.addEventListener("mouseenter",()=>{i.style.background="rgba(255, 255, 255, 0.2)",i.style.color="#fff"}),i.addEventListener("mouseleave",()=>{i.style.background="rgba(255, 255, 255, 0.1)",i.style.color="#ccc"}),i.addEventListener("click",()=>{n.style.animation="fadeOut 0.2s ease-out",setTimeout(()=>n.remove(),200)}),r.appendChild(i);const a=document.createElement("div");a.style.cssText="\n    background: #fff;\n    border-radius: 16px;\n    padding: 20px;\n    margin: 20px 0;\n    box-shadow: \n      0 8px 16px rgba(0, 0, 0, 0.2),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n  ";let l=o(e,"svg");if("string"==typeof l){const e=document.createElement("div");e.innerHTML=l,l=e.firstChild}l.style.cssText="\n    width: 200px;\n    height: 200px;\n    display: block;\n    margin: 0 auto;\n  ",a.appendChild(l),r.appendChild(a);const s=document.createElement("div");s.style.cssText="\n    background:\n      linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%),\n      rgba(255, 255, 255, 0.02);\n    border: 1px solid rgba(255, 255, 255, 0.15);\n    border-radius: 14px;\n    padding: 12px 16px;\n    margin-bottom: 16px;\n    transition: all 0.3s ease;\n    position: relative;\n    overflow: hidden;\n    backdrop-filter: blur(16px) saturate(1.3);\n    -webkit-backdrop-filter: blur(16px) saturate(1.3);\n  ";const d=document.createElement("p");d.textContent=e,d.style.cssText="\n    margin: 0;\n    font-size: 13px;\n    line-height: 1.4;\n    word-break: break-all;\n    color: #f7931a;\n    font-family: 'SFMono-Regular', Menlo, Consolas, 'Liberation Mono', monospace;\n  ",s.appendChild(d),r.appendChild(s);const c=document.createElement("button");c.textContent="复制地址",c.style.cssText="\n    width: 100%;\n    padding: 12px 16px;\n    border: 1px solid rgba(255, 255, 255, 0.15);\n    background: \n      linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%),\n      rgba(255, 255, 255, 0.02);\n    backdrop-filter: blur(16px) saturate(1.3);\n    -webkit-backdrop-filter: blur(16px) saturate(1.3);\n    color: #e8e8e8;\n    border-radius: 14px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.3s ease;\n  ";const h=e=>{const t=document.createElement("div");t.style.cssText="\n      position: fixed;\n      inset: 0;\n      background: rgba(0, 0, 0, 0.8);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 15000;\n    ";const n=document.createElement("div");n.style.cssText="\n      background: #000;\n      border: 1px solid #333;\n      border-radius: 12px;\n      padding: 20px;\n      max-width: 90%;\n      text-align: center;\n    ";const r=document.createElement("p");r.textContent="长按下方地址进行复制",r.style.cssText="\n      color: #ccc;\n      margin: 0 0 12px 0;\n      font-size: 14px;\n    ";const o=document.createElement("textarea");o.value=e,o.style.cssText="\n      width: 100%;\n      background: rgba(247, 147, 26, 0.15);\n      border: 1px solid rgba(247, 147, 26, 0.3);\n      border-radius: 8px;\n      padding: 12px;\n      color: #f7931a;\n      font-family: 'SFMono-Regular', Menlo, Consolas, 'Liberation Mono', monospace;\n      font-size: 13px;\n      resize: none;\n      outline: none;\n    ",o.readOnly=!0,o.rows=3;const i=document.createElement("button");i.textContent="关闭",i.style.cssText="\n      margin-top: 12px;\n      padding: 8px 16px;\n      background: rgba(255, 255, 255, 0.1);\n      border: none;\n      border-radius: 6px;\n      color: #ccc;\n      cursor: pointer;\n    ",i.onclick=()=>t.remove(),t.onclick=e=>{e.target===t&&t.remove()},n.appendChild(r),n.appendChild(o),n.appendChild(i),t.appendChild(n),document.body.appendChild(t),setTimeout(()=>{o.focus(),o.setSelectionRange(0,e.length)},100)},u=async()=>{try{await(async e=>{const t=/iPad|iPhone|iPod/.test(navigator.userAgent),n=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);try{if(navigator.clipboard&&window.isSecureContext&&!t)return await navigator.clipboard.writeText(e),!0;const n=document.createElement("textarea");if(n.value=e,n.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 2em;\n        height: 2em;\n        padding: 0;\n        border: none;\n        outline: none;\n        boxShadow: none;\n        background: transparent;\n        opacity: 0;\n        z-index: -1;\n      ",document.body.appendChild(n),t){const e=document.createRange();e.selectNodeContents(n);const t=window.getSelection();t.removeAllRanges(),t.addRange(e),n.setSelectionRange(0,999999)}else n.focus(),n.select();const r=document.execCommand("copy");if(document.body.removeChild(n),r)return!0;throw new Error("复制失败")}catch(r){if(t&&n)return h(e),!1;throw r}})(e)&&(d.textContent=e,d.style.color="#f7931a",c.textContent="已复制",s.style.borderColor="rgba(255, 255, 255, 0.35)",setTimeout(()=>{d.textContent=e,d.style.color="#f7931a",c.textContent="复制地址",s.style.borderColor="rgba(255, 255, 255, 0.15)"},2e3))}catch(e){c.textContent="复制失败",setTimeout(()=>{c.textContent="复制地址"},2e3)}};c.addEventListener("click",u),c.addEventListener("touchend",e=>{e.preventDefault(),u()},{passive:!1}),r.appendChild(c),n.appendChild(r),document.body.appendChild(n)}(i.address),navigator.clipboard&&window.isSecureContext&&navigator.clipboard.writeText(i.address).then(()=>{e?e.textContent+=" - 已复制到剪贴板":console.log("STATUS: 接收地址已复制到剪贴板")}).catch(()=>{}),i}catch(e){return console.error("获取接收地址失败",e),r="获取接收地址失败: "+e.message,t?t.textContent=r:console.error("ERROR:",r),null}var r}})();